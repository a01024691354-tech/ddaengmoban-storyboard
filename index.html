<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<title>ë•¡ëª¨ë°˜ ìŠ¤íƒ€ì¼ ìŠ¤í† ë¦¬ë³´ë“œ ìƒì„±ê¸°</title>
<style>
body {
  background:#0f1220;
  color:#fff;
  font-family: Pretendard, sans-serif;
  margin:0;
  padding:20px;
}
h1 { margin-bottom:10px; }
.container { display:grid; grid-template-columns:1fr 1fr; gap:20px; }
.box {
  background:#1a1f3c;
  border-radius:12px;
  padding:16px;
}
textarea, select, button {
  width:100%;
  padding:10px;
  border-radius:8px;
  border:none;
  margin-top:8px;
}
textarea { height:120px; }
button {
  background:#4b6cff;
  color:#fff;
  cursor:pointer;
  margin-top:12px;
}
.scene {
  background:#11152e;
  border-radius:10px;
  padding:12px;
  margin-bottom:10px;
}
.prompt {
  font-size:13px;
  color:#9bdcff;
  margin-top:6px;
}
</style>
</head>

<body>
<h1>ğŸ¬ ë•¡ëª¨ë°˜ ìŠ¤íƒ€ì¼ ìŠ¤í† ë¦¬ë³´ë“œ AI</h1>
<p>ëŒ€ë³¸ì„ ì…ë ¥í•˜ë©´ ì¥ë©´ë³„ ì´ë¯¸ì§€ í”„ë¡¬í”„íŠ¸ë¥¼ ìë™ ìƒì„±í•©ë‹ˆë‹¤.</p>

<div class="container">
  <div class="box">
    <h3>ğŸ“œ ëŒ€ë³¸ ì…ë ¥</h3>
    <textarea id="script"></textarea>

    <h3>ğŸ¨ ë¹„ì£¼ì–¼ ìŠ¤íƒ€ì¼</h3>
    <select id="style">
      <option>Clay style stop motion</option>
      <option>Animated movie style</option>
      <option>Photorealistic cinematic style</option>
      <option>Isometric mini world diorama style</option>
    </select>

    <button onclick="generate()">ìŠ¤í† ë¦¬ë³´ë“œ ìƒì„±</button>
  </div>

  <div class="box">
    <h3>ğŸ–¼ï¸ ìƒì„± ê²°ê³¼</h3>
    <div id="result"></div>
  </div>
</div>

<script>
async function generate() {
  const text = document.getElementById("script").value;
  const style = document.getElementById("style").value;
  const scenes = text.split(".").filter(s => s.trim() !== "");
  const result = document.getElementById("result");
  result.innerHTML = "";

  for (let i = 0; i < scenes.length; i++) {

    const prompt = `
${style}, storyboard illustration,
${scenes[i].trim()},
cinematic lighting, emotional scene,
detailed, high quality
    `.trim();

    const sceneDiv = document.createElement("div");
    sceneDiv.innerHTML = `<h3>Scene ${i + 1}</h3><p>${scenes[i]}</p><p>â³ ì´ë¯¸ì§€ ìƒì„± ì¤‘...</p>`;
    result.appendChild(sceneDiv);

    try {
      const response = await fetch("/api/generate-image", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ prompt })
      });

      const data = await response.json();

      sceneDiv.innerHTML = `<h3>Scene ${i + 1}</h3><p>${scenes[i]}</p>`;

      const img = document.createElement("img");
      img.src = data.image;
      img.style.width = "100%";
      img.style.marginTop = "10px";

      sceneDiv.appendChild(img);

    } catch (err) {
      sceneDiv.innerHTML += "<p>âŒ ì´ë¯¸ì§€ ìƒì„± ì‹¤íŒ¨</p>";
    }
  }
}
</script>
</body>
</html>
